<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ê–¥–º–∏–Ω–∫–∞ ‚Äî EdvardCode</title>
  <style>
    body{margin:0;padding:20px;font-family:sans-serif;background:#0a0a0a;color:#eee;}
    h1{color:#f00;text-shadow:0 0 15px #f33;margin-bottom:20px;}
    
    .admin-container{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:40px;
      align-items:start;
    }

    /* –§–æ—Ä–º–∞ */
    form{
      padding:20px;background:#151515;border-radius:12px;
      box-shadow:0 0 15px rgba(255,0,0,0.3);width:600px;
    }
    .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px 25px;}
    label{display:block;margin-bottom:5px;color:#ddd;font-size:14px;}
    input,textarea,select{
      width:100%;padding:10px;border:none;border-radius:8px;background:#000;color:#fff;
    }
    textarea{min-height:80px;grid-column:span 2;}
    #addBtn{
      margin-top:15px;padding:12px 25px;background:#f00;color:#fff;border:none;
      border-radius:8px;cursor:pointer;font-weight:bold;
    }
    #addBtn:hover{background:#c00;box-shadow:0 0 10px #f33;}

    /* –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ */
    .projects-list{margin-top:30px;}
    .projects-table{
      width:600px;border-collapse:collapse;margin-top:10px;
      background:#1a1a1a;border-radius:10px;overflow:hidden;font-size:0.9rem;
    }
    .projects-table th,.projects-table td{
      padding:10px;border-bottom:1px solid #333;text-align:left;
    }
    .projects-table th{background:#222;color:#f66;}
    .projects-table tr:last-child td{border-bottom:none;}
    .projects-table button{
      background:#f00;color:#fff;border:none;padding:5px 10px;
      border-radius:6px;cursor:pointer;font-size:0.8rem;
    }
    .projects-table button:hover{background:#c00;}

    /* –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å */
    .right-panel{
      padding:20px;background:#151515;border-radius:12px;
      box-shadow:0 0 15px rgba(255,0,0,0.3);
    }
    .toggle-btn{
      padding:8px 15px;background:#333;color:#fff;border:none;
      border-radius:8px;cursor:pointer;font-weight:bold;float:right;
      margin-bottom:10px;
    }
    .toggle-btn:hover{background:#f00;}
    pre{
      background:#000;color:#0f0;padding:15px;border-radius:8px;display:none;
      white-space:pre-wrap;word-wrap:break-word;max-height:300px;overflow-y:auto;
      font-size:0.85rem;
    }

    /* –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä */
    .preview-card{
      margin-top:40px;background:#111;border:1px solid #333;border-radius:10px;
      overflow:hidden;box-shadow:0 0 15px rgba(255,0,0,0.2);width:280px;
    }
    .preview-badge{
      position:absolute;top:10px;left:10px;
      background:#f00;color:#fff;font-size:0.7rem;font-weight:bold;
      padding:3px 7px;border-radius:5px;box-shadow:0 0 5px #000;
    }
    .preview-img-wrapper{position:relative;}
    .preview-card img{width:100%;height:170px;object-fit:cover;}
    .preview-info{padding:15px;}
    .preview-title{color:#f00;font-size:1.1rem;margin-bottom:8px;}
    .preview-desc{color:#ccc;font-size:0.9rem;margin-bottom:10px;}
    .preview-tags{margin-bottom:10px;}
    .preview-tag{
      display:inline-block;background:rgba(255,0,0,0.1);
      color:#f66;padding:3px 8px;border-radius:12px;font-size:0.75rem;
      margin:0 5px 5px 0;
    }
    .preview-link{
      display:inline-block;text-decoration:none;color:#fff;
      background:linear-gradient(45deg,#f00,#c00);
      padding:8px 15px;border-radius:20px;font-weight:bold;transition:.3s;
    }
    .preview-link:hover{background:linear-gradient(45deg,#c00,#f00);box-shadow:0 0 10px #f33;}
  </style>
</head>
<body>
  <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
  <div class="admin-container">

    <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
    <div>
      <form id="projectForm">
        <div class="form-grid">
          <div>
            <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫:</label>
            <input type="text" id="title" required oninput="updatePreview()">
          </div>
          <div>
            <label>URL –∫–∞—Ä—Ç–∏–Ω–∫–∏:</label>
            <input type="text" id="img" required oninput="updatePreview()">
          </div>
          <div>
            <label>–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
            <input type="text" id="tags" oninput="updatePreview()">
          </div>
          <div>
            <label>–°—Å—ã–ª–∫–∞:</label>
            <input type="text" id="link" required oninput="updatePreview()">
          </div>
          <div>
            <label>–î–æ—Å—Ç—É–ø:</label>
            <select id="access" onchange="updatePreview()">
              <option value="public">–î–ª—è –≤—Å–µ—Ö</option>
              <option value="secret">–î–ª—è –ù–ï–î–û–•–ê–ö–ï–†–´</option>
            </select>
          </div>
          <div style="grid-column: span 2;">
            <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
            <textarea id="desc" required oninput="updatePreview()"></textarea>
          </div>
        </div>
        <button id="addBtn" type="submit">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
      </form>

      <div class="projects-list">
        <h2>–¢–µ–∫—É—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã</h2>
        <table class="projects-table">
          <thead>
            <tr>
              <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
              <th>–î–æ—Å—Ç—É–ø</th>
              <th>–¢–µ–≥–∏</th>
              <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
            </tr>
          </thead>
          <tbody id="list"></tbody>
        </table>
      </div>
    </div>

    <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
    <div class="right-panel">
      <button class="toggle-btn" onclick="toggleJSON()">–ü–æ–∫–∞–∑–∞—Ç—å JSON</button>
      <pre id="jsonOut">{}</pre>
      <button onclick="download()">üíæ –°–∫–∞—á–∞—Ç—å projects.json</button>

      <!-- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä -->
      <div class="preview-card" id="previewCard" style="display:none;">
        <div class="preview-img-wrapper">
          <span class="preview-badge" id="previewBadge" style="display:none;">SECRET</span>
          <img id="previewImg" src="" alt="">
        </div>
        <div class="preview-info">
          <div class="preview-title" id="previewTitle">–ó–∞–≥–æ–ª–æ–≤–æ–∫</div>
          <div class="preview-desc" id="previewDesc">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ—è–≤–∏—Ç—Å—è —Ç—É—Ç...</div>
          <div class="preview-tags" id="previewTags"></div>
          <a href="#" target="_blank" class="preview-link" id="previewLink">–°—Å—ã–ª–∫–∞ ‚ûú</a>
        </div>
      </div>
    </div>

  </div>

  <script>
    let projects=[];

    fetch("projects.json")
      .then(r=>r.json())
      .then(data=>{
        projects=data;render();updateJSON();
      });

    function render(){
      const list=document.getElementById("list");
      list.innerHTML="";
      projects.forEach((p,i)=>{
        const row=document.createElement("tr");
        row.innerHTML=`
          <td>${p.title}</td>
          <td>${p.access}</td>
          <td>${p.tags.join(", ")}</td>
          <td><button onclick="deleteProject(${i})">–£–¥–∞–ª–∏—Ç—å</button></td>`;
        list.appendChild(row);
      });
    }
    function deleteProject(i){projects.splice(i,1);render();updateJSON();}

    function updateJSON(){
      document.getElementById("jsonOut").textContent=JSON.stringify(projects,null,2);
    }

    document.getElementById("projectForm").addEventListener("submit",e=>{
      e.preventDefault();
      const newP={
        title:title.value,desc:desc.value,img:img.value,
        tags:tags.value.split(",").map(t=>t.trim()).filter(Boolean),
        link:link.value,access:access.value
      };
      projects.push(newP);render();updateJSON();
      e.target.reset();
      document.getElementById("previewCard").style.display="none";
    });

    function download(){
      const blob=new Blob([JSON.stringify(projects,null,2)],{type:"application/json"});
      const a=document.createElement("a");
      a.href=URL.createObjectURL(blob);a.download="projects.json";a.click();
    }

    function toggleJSON(){
      const pre=document.getElementById("jsonOut");
      const btn=document.querySelector(".toggle-btn");
      if(pre.style.display==="none"||pre.style.display===""){
        pre.style.display="block";btn.textContent="–°–∫—Ä—ã—Ç—å JSON";
      }else{pre.style.display="none";btn.textContent="–ü–æ–∫–∞–∑–∞—Ç—å JSON";}
    }

    function updatePreview(){
      const titleVal=title.value,descVal=desc.value,imgVal=img.value,
            tagsVal=tags.value,linkVal=link.value,accessVal=access.value;
      const card=document.getElementById("previewCard"),
            imgEl=previewImg,titleEl=previewTitle,descEl=previewDesc,
            tagsEl=previewTags,linkEl=previewLink,badge=previewBadge;

      if(titleVal||descVal||imgVal||tagsVal||linkVal){
        card.style.display="block";
        titleEl.textContent=titleVal||"–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è";
        descEl.textContent=descVal||"–û–ø–∏—Å–∞–Ω–∏–µ...";
        linkEl.href=linkVal||"#";
        tagsEl.innerHTML="";
        if(tagsVal){
          tagsVal.split(",").map(t=>t.trim()).filter(Boolean).forEach(tag=>{
            const span=document.createElement("span");
            span.className="preview-tag";span.textContent=tag;
            tagsEl.appendChild(span);
          });
        }
        if(imgVal) imgEl.src=imgVal;
        badge.style.display = (accessVal==="secret")?"inline-block":"none";
      }else{card.style.display="none";}
    }
  </script>
</body>
</html>
