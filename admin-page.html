<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ê–¥–º–∏–Ω–∫–∞ ‚Äî EdvardCode</title>
  <style>
    body{margin:0;padding:30px;font-family:sans-serif;background:#0a0a0a;color:#eee;}
    h1{color:#f00;text-shadow:0 0 15px #f33;margin-bottom:20px;}
    
    /* –§–æ—Ä–º–∞ */
    .form-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:20px;
    }
    form{margin:20px 0;padding:20px;background:#151515;border-radius:12px;
      box-shadow:0 0 15px rgba(255,0,0,0.3);max-width:800px;}
    label{display:block;margin-top:5px;margin-bottom:5px;color:#ddd;font-size:14px;}
    input,textarea,select{
      width:100%;padding:10px;border:none;border-radius:8px;background:#000;color:#fff;
    }
    textarea{min-height:80px;grid-column:span 2;}
    #addBtn{
      margin-top:15px;padding:12px 25px;background:#f00;color:#fff;border:none;
      border-radius:8px;cursor:pointer;font-weight:bold;
    }
    #addBtn:hover{background:#c00;box-shadow:0 0 10px #f33;}
    
    /* –ü—Ä–æ–µ–∫—Ç—ã */
    .projects-list{margin-top:30px;max-width:800px;}
    .project{margin:10px 0;padding:15px;background:#1a1a1a;border-radius:10px;
      display:flex;justify-content:space-between;align-items:center;}
    .project span{color:#f66;margin-left:10px;font-size:14px;}
    .project button{background:#f00;color:#fff;border:none;padding:5px 10px;
      border-radius:6px;cursor:pointer;}
    .project button:hover{background:#c00;}
    
    /* JSON */
    .json-container{max-width:800px;margin-top:20px;}
    pre{background:#000;color:#0f0;padding:15px;border-radius:8px;display:none;
      white-space:pre-wrap;word-wrap:break-word;}
    .toggle-btn{margin-top:10px;padding:8px 18px;background:#333;color:#fff;
      border:none;border-radius:8px;cursor:pointer;}
    .toggle-btn:hover{background:#f00;}
  </style>
</head>
<body>
  <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
  <form id="projectForm">
    <div class="form-grid">
      <div>
        <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫:</label>
        <input type="text" id="title" required>
      </div>
      <div>
        <label>URL –∫–∞—Ä—Ç–∏–Ω–∫–∏:</label>
        <input type="text" id="img" required>
      </div>
      <div>
        <label>–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
        <input type="text" id="tags">
      </div>
      <div>
        <label>–°—Å—ã–ª–∫–∞:</label>
        <input type="text" id="link" required>
      </div>
      <div>
        <label>–î–æ—Å—Ç—É–ø:</label>
        <select id="access">
          <option value="public">–î–ª—è –≤—Å–µ—Ö</option>
          <option value="secret">–î–ª—è –ù–ï–î–û–•–ê–ö–ï–†–´</option>
        </select>
      </div>
      <div style="grid-column: span 2;">
        <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
        <textarea id="desc" required></textarea>
      </div>
    </div>
    <button id="addBtn" type="submit">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
  </form>

  <div class="projects-list">
    <h2>–¢–µ–∫—É—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã</h2>
    <div id="list"></div>
  </div>

  <div class="json-container">
    <button class="toggle-btn" onclick="toggleJSON()">–ü–æ–∫–∞–∑–∞—Ç—å JSON</button>
    <pre id="jsonOut">{}</pre>
    <button onclick="download()">üíæ –°–∫–∞—á–∞—Ç—å projects.json</button>
  </div>

  <script>
    let projects=[];

    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã
    fetch("projects.json")
      .then(r=>r.json())
      .then(data=>{
        projects=data;
        render();
        updateJSON();
      });

    // –†–∏—Å—É–µ–º —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
    function render(){
      const list=document.getElementById("list");
      list.innerHTML="";
      projects.forEach((p,i)=>{
        const div=document.createElement("div");
        div.className="project";
        div.innerHTML=`<strong>${p.title}</strong> [${p.access}]
                       <span>${p.tags.join(", ")}</span>`;
        const del=document.createElement("button");
        del.textContent="–£–¥–∞–ª–∏—Ç—å";
        del.onclick=()=>{projects.splice(i,1);render();updateJSON()};
        div.appendChild(del);
        list.appendChild(div);
      });
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º JSON —Ç–µ–∫—Å—Ç
    function updateJSON(){
      document.getElementById("jsonOut").textContent=JSON.stringify(projects,null,2);
    }

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
    document.getElementById("projectForm").addEventListener("submit",e=>{
      e.preventDefault();
      const newP={
        title:title.value,
        desc:desc.value,
        img:img.value,
        tags:tags.value.split(",").map(t=>t.trim()).filter(Boolean),
        link:link.value,
        access:access.value
      };
      projects.push(newP);
      render();
      updateJSON();
      e.target.reset();
    });

    // –°–∫–∞—á–∞—Ç—å JSON
    function download(){
      const blob=new Blob([JSON.stringify(projects,null,2)],{type:"application/json"});
      const a=document.createElement("a");
      a.href=URL.createObjectURL(blob);
      a.download="projects.json";
      a.click();
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å/–°–∫—Ä—ã—Ç—å JSON
    function toggleJSON(){
      const pre=document.getElementById("jsonOut");
      const btn=document.querySelector(".toggle-btn");
      if(pre.style.display==="none"||pre.style.display===""){
        pre.style.display="block";btn.textContent="–°–∫—Ä—ã—Ç—å JSON";
      } else {
        pre.style.display="none";btn.textContent="–ü–æ–∫–∞–∑–∞—Ç—å JSON";
      }
    }
  </script>
</body>
</html>
